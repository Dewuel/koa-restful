webpackJsonp([8],{Td7H:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i("Xxa5"),s=i.n(r),o=i("exGp"),a=i.n(o),l=i("woOf"),n=i.n(l),d=i("zE1I"),c=i("5dNQ"),u={name:"dptMgr",data:function(){return{formLabelWidth:"80px",dialogFormTitle:"",dialogFormUrl:"",dialogFormVisible:!1,defaultProps:{children:"children",label:"DPT_NAME"},formFields:{DPT_KEY:"",DPT_PKEY:"",DPT_SOFT:0},formFieldsAdd:{},fromRules:{Fname:[{required:!0,message:"请输入名称",trigger:"blur"}]},loading:!0,dptTreeData:[],showCk:!1,showBj:!1,th785:785}},mounted:function(){this.initPage()},methods:{initPage:function(){this.formFieldsAdd=n()({},this.formFields),this.getDptList()},getDptList:function(){var e=this;return a()(s.a.mark(function t(){var i,r;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,d.a.get("/system_mgr/dpt/getList",{});case 3:200==(i=t.sent).code&&(r=i.data,e.dptTreeData=Object(c.a)(r,{idKey:"DPT_KEY",pidKey:"DPT_PKEY",rootPid:"0"}),e.loading=!1);case 5:case"end":return t.stop()}},t,e)}))()},add:function(){this.formFields=n()({},this.formFieldsAdd);var e=this.$refs.dptTree.getCurrentNode();this.formFields.DPT_PKEY=null==e?"0":e.DPT_KEY,this.dialogFormTitle="添加部门",this.dialogFormUrl="/system_mgr/dpt/add",this.dialogFormVisible=!0},edit:function(){var e=this.$refs.dptTree.getCurrentNode();if(null==e)return this.$message.error("请选择要编辑的部门！");this.formFields=e,this.dialogFormTitle="编辑部门",this.dialogFormUrl="/system_mgr/dpt/update",this.dialogFormVisible=!0},addOrEditSubmit:function(e){var t,i=this;this.$refs[e].validate((t=a()(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=8;break}return e.next=3,d.a.post(i.dialogFormUrl,i.formFields);case 3:200==e.sent.code&&(i.getDptList(),i.dialogFormVisible=!1,i.$message.success("添加成功！")),e.next=10;break;case 8:return console.log("error submit!!"),e.abrupt("return",!1);case 10:case"end":return e.stop()}},e,i)})),function(e){return t.apply(this,arguments)}))},del:function(){var e=this,t=this.$refs.dptTree.getCurrentNode();if(null==t)return this.$message.error("请选择要删除的节点！");this.$confirm("确认删除该数据?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(a()(s.a.mark(function i(){return s.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,d.a.delete("/system_mgr/dpt/delete",{DPT_KEY:t.DPT_KEY});case 2:200==i.sent.code&&(e.getDptList(),e.$message.success("删除成功！"));case 4:case"end":return i.stop()}},i,e)}))).catch(function(){})}}},f={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"dptMge"},[i("div",{staticClass:"log-main"},[i("div",{staticClass:"table-content clearfix"},[i("div",{staticClass:"dptTree set-left"},[i("div",{staticClass:"dptTree-content"},[i("div",{staticClass:"dptTree-title"},[i("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"size"},on:{click:e.add}},[e._v("添加")]),e._v(" "),i("el-button",{attrs:{size:"size",icon:"el-icon-edit"},on:{click:e.edit}},[e._v("编辑")]),e._v(" "),i("el-button",{attrs:{size:"size",icon:"el-icon-close"},on:{click:e.del}},[e._v("删除")]),e._v(" "),i("el-button",{attrs:{size:"size",icon:"el-icon-refresh"},on:{click:e.getDptList}},[e._v("刷新")])],1),e._v(" "),i("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"dptTree",attrs:{"default-expand-all":"","highlight-current":!0,"expand-on-click-node":!1,data:e.dptTreeData,"node-key":"DPT_KEY",props:e.defaultProps}})],1)])])]),e._v(" "),i("el-dialog",{attrs:{title:e.dialogFormTitle,visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[i("el-form",{ref:"formFields",attrs:{model:e.formFields,fromRules:e.fromRules}},[i("el-form-item",{attrs:{label:"名称","label-width":e.formLabelWidth,prop:"DPT_NAME"}},[i("el-input",{attrs:{"auto-complete":"off"},model:{value:e.formFields.DPT_NAME,callback:function(t){e.$set(e.formFields,"DPT_NAME",t)},expression:"formFields.DPT_NAME"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"排序","label-width":e.formLabelWidth,prop:"DPT_SOFT"}},[i("el-input-number",{attrs:{"auto-complete":"off"},model:{value:e.formFields.DPT_SOFT,callback:function(t){e.$set(e.formFields,"DPT_SOFT",t)},expression:"formFields.DPT_SOFT"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addOrEditSubmit("formFields")}}},[e._v("确定")])],1)],1)],1)},staticRenderFns:[]};var m=i("VU/8")(u,f,!1,function(e){i("cywi")},null,null);t.default=m.exports},cywi:function(e,t){}});
//# sourceMappingURL=8.1b1e974ee4bccb6bf6ee.js.map