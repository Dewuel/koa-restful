webpackJsonp([6],{URyL:function(e,r){},zfgE:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i=t("Xxa5"),n=t.n(i),o=t("exGp"),s=t.n(o),a=t("woOf"),l=t.n(a),u=t("zE1I"),d=t("5dNQ"),c={name:"menuMgr",data:function(){return{defaultMenuProps:{children:"children",label:"MENU_NAME"},defaultOperProps:{children:"children",label:"OPER_NAME"},formFieldsOper:{OPER_NAME:"",OPER_URL:"",OPER_TYPE:0,OPER_PKEY:"",OPER_SOFT:1},formFieldsOperAdd:{},formRulesOper:{Fname:[{required:!0,message:"请输入名称",trigger:"blur"}]},formFieldsMenu:{MENU_NAME:"",MENU_PKEY:null,MENU_PKEY_NAME:"",MENU_URL:"",MENU_ICON:"",MENU_SOFT:""},formFieldsMenuAdd:{},formRulesMenu:{MENU_NAME:[{required:!0,message:"请输入名称",trigger:"blur"}],MENU_SOFT:[{required:!0,message:"请输入排序",trigger:"blur"}]},formLabelWidth:"80px",loadingOper:!0,loadingMenu:!0,dialogFormTitleMenu:"",dialogFormUrlMenu:"",dialogFormVisibleMenu:!1,dialogFormTitleOper:"",dialogFormUrlOper:"",dialogFormVisibleOper:!1,menuTreeData:[],operTreeData:[]}},mounted:function(){this.initPage()},methods:{initPage:function(){this.formFieldsMenuAdd=l()({},this.formFieldsMenu),this.formFieldsOperAdd=l()({},this.formFieldsOper),this.initMenuTree(),this.initOperTree()},renderContentMenu:function(e,r){r.node;var t=r.data,i=(r.store,arguments[0]);return"0"==t.MENU_KEY?i("span",[i("span",t.MENU_NAME)]):i("span",[i("i",{attrs:{class:t.MENU_ICON}}),i("span","     "+t.MENU_NAME),i("span","---"+t.MENU_URL)])},renderContentOper:function(e,r){r.node;var t=r.data,i=(r.store,arguments[0]);return"0"==t.OPER_KEY?i("span",[i("span",t.OPER_NAME)]):0==t.OPER_TYPE?i("span",[i("i",{attrs:{class:"fa fa-hand-o-up"}}),i("span","     "),i("span",t.OPER_NAME),i("span","---"+t.OPER_URL)]):i("span",[i("span",t.OPER_NAME),i("span","---"+t.OPER_URL)])},initMenuTree:function(){var e=this;return s()(n.a.mark(function r(){var t;return n.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return e.loadingMenu=!0,r.next=3,u.a.get("/system_mgr/menu/getList",{});case 3:200==(t=r.sent).code&&(t.data.push({MENU_KEY:"0",MENU_NAME:"菜单列表",MENU_PKEY:"-1"}),e.menuTreeData=Object(d.a)(t.data,{idKey:"MENU_KEY",labelKey:"MENU_NAME",pidKey:"MENU_PKEY",rootPid:"-1"}),e.loadingMenu=!1);case 5:case"end":return r.stop()}},r,e)}))()},initOperTree:function(){var e=this;return s()(n.a.mark(function r(){var t;return n.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return e.loadingOper=!0,r.next=3,u.a.get("/system_mgr/oper/getList",{});case 3:200==(t=r.sent).code&&(t.data.push({OPER_KEY:"0",OPER_NAME:"操作列表",OPER_PKEY:"-1"}),e.operTreeData=Object(d.a)(t.data,{idKey:"OPER_KEY",labelKey:"OPER_NAME",pidKey:"OPER_PKEY",rootPid:"-1"}),e.loadingOper=!1);case 5:case"end":return r.stop()}},r,e)}))()},addMenu:function(){this.formFieldsMenu=l()({},this.formFieldsMenuAdd);var e=this.$refs.menuTree.getCurrentNode();if(null==e)return this.$message.error("请先选择一个父集！");this.formFieldsMenu.MENU_PKEY=e.MENU_KEY,this.dialogFormTitleMenu="添加菜单",this.dialogFormUrlMenu="/system_mgr/menu/add",this.dialogFormVisibleMenu=!0},editMenu:function(){var e=this.$refs.menuTree.getCurrentNode();if(null==e)return this.$message.error("请选择要修改的数据！");this.formFieldsMenu=e,this.dialogFormTitleMenu="编辑菜单",this.dialogFormUrlMenu="/system_mgr/menu/update",this.dialogFormVisibleMenu=!0},addOrEditSubmitMenu:function(e){var r,t=this;this.$refs[e].validate((r=s()(n.a.mark(function e(r){return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=7;break}return e.next=3,u.a.post(t.dialogFormUrlMenu,t.formFieldsMenu);case 3:200==e.sent.code&&(t.initMenuTree(),t.dialogFormVisibleMenu=!1,t.$message.success("添加成功!")),e.next=9;break;case 7:return console.log("error submit!!"),e.abrupt("return",!1);case 9:case"end":return e.stop()}},e,t)})),function(e){return r.apply(this,arguments)}))},delMenu:function(){var e=this,r=this.$refs.menuTree.getCurrentNode();if(null==r)return this.$message.error("请选择要删除的菜单！");this.$confirm("确认删除菜单?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(s()(n.a.mark(function t(){var i;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i={MENU_KEY:r.MENU_KEY},t.next=3,u.a.delete("/system_mgr/menu/delete",i);case 3:200==t.sent.code&&(e.$message.success("删除成功！"),e.initMenuTree());case 5:case"end":return t.stop()}},t,e)}))).catch(function(){})},addOper:function(){this.formFieldsOper=l()({},this.formFieldsOperAdd);var e=this.$refs.operTree.getCurrentNode();if(null==e)return this.$message.error("请先选择一个父集！");this.formFieldsOper.OPER_PKEY=e.OPER_KEY,this.dialogFormTitleOper="添加按钮",this.dialogFormUrlOper="/system_mgr/oper/add",this.dialogFormVisibleOper=!0},editOper:function(){var e=this.$refs.operTree.getCurrentNode();if(null==e)return this.$message.error("请选择要修改的数据！");this.formFieldsOper=e,this.dialogFormTitleOper="编辑按钮",this.dialogFormUrlOper="/system_mgr/oper/update",this.dialogFormVisibleOper=!0},addOrEditSubmitOper:function(e){var r,t=this;this.$refs[e].validate((r=s()(n.a.mark(function e(r){return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=7;break}return e.next=3,u.a.post(t.dialogFormUrlOper,t.formFieldsOper);case 3:200==e.sent.code&&(t.$message.success("添加成功!"),t.dialogFormVisibleOper=!1,t.initOperTree()),e.next=9;break;case 7:return console.log("error submit!!"),e.abrupt("return",!1);case 9:case"end":return e.stop()}},e,t)})),function(e){return r.apply(this,arguments)}))},delOper:function(){var e=this,r=this.$refs.operTree.getCurrentNode();if(null==r)return this.$message.error("请选择要删除的按钮！");this.$confirm("确认删除按钮?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(s()(n.a.mark(function t(){var i;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i={OPER_KEY:r.OPER_KEY},t.next=3,u.a.delete("/system_mgr/oper/delete",i);case 3:200==t.sent.code&&(e.$message.success("删除成功！"),e.initOperTree());case 5:case"end":return t.stop()}},t,e)}))).catch(function(){})}}},m={render:function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"menuManage"},[t("div",{staticClass:"menuTree"},[t("div",{staticClass:"menuTree-title"},[t("el-button",{attrs:{icon:"el-icon-plus",size:"size"},on:{click:e.addMenu}},[e._v("增加")]),e._v(" "),t("el-button",{attrs:{icon:"el-icon-edit-outline",size:"size"},on:{click:e.editMenu}},[e._v("修改")]),e._v(" "),t("el-button",{attrs:{icon:"el-icon-minus",size:"size"},on:{click:e.delMenu}},[e._v("删除")]),e._v(" "),t("el-button",{attrs:{icon:"el-icon-refresh",size:"size"},on:{click:e.initMenuTree}},[e._v("刷新")])],1),e._v(" "),t("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingMenu,expression:"loadingMenu"}],ref:"menuTree",staticStyle:{"box-sizing":"border-box"},attrs:{"default-expand-all":"","highlight-current":!0,"expand-on-click-node":!1,data:e.menuTreeData,"render-content":e.renderContentMenu,"node-key":"MENU_KEY",props:e.defaultMenuProps}})],1),e._v(" "),t("div",{staticClass:"operTree"},[t("div",{staticClass:"operTree-title"},[t("el-button",{attrs:{icon:"el-icon-plus",size:"size"},on:{click:e.addOper}},[e._v("增加")]),e._v(" "),t("el-button",{attrs:{icon:"el-icon-edit-outline",size:"size"},on:{click:e.editOper}},[e._v("修改")]),e._v(" "),t("el-button",{attrs:{icon:"el-icon-minus",size:"size"},on:{click:e.delOper}},[e._v("删除")]),e._v(" "),t("el-button",{attrs:{icon:"el-icon-refresh",size:"size"},on:{click:e.initOperTree}},[e._v("刷新")])],1),e._v(" "),t("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingOper,expression:"loadingOper"}],ref:"operTree",staticStyle:{"box-sizing":"border-box"},attrs:{"default-expand-all":"","highlight-current":!0,"expand-on-click-node":!1,data:e.operTreeData,"render-content":e.renderContentOper,"node-key":"OPER_KEY",props:e.defaultOperProps}})],1),e._v(" "),t("el-dialog",{attrs:{title:"添加菜单",visible:e.dialogFormVisibleMenu},on:{"update:visible":function(r){e.dialogFormVisibleMenu=r}}},[t("el-form",{ref:"formFieldsMenu",attrs:{model:e.formFieldsMenu,rules:e.formRulesMenu}},[t("el-form-item",{attrs:{label:"名称","label-width":e.formLabelWidth,prop:"MENU_NAME"}},[t("el-input",{attrs:{"auto-complete":"off"},model:{value:e.formFieldsMenu.MENU_NAME,callback:function(r){e.$set(e.formFieldsMenu,"MENU_NAME",r)},expression:"formFieldsMenu.MENU_NAME"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"地址","label-width":e.formLabelWidth,prop:"MENU_URL"}},[t("el-input",{attrs:{"auto-complete":"off"},model:{value:e.formFieldsMenu.MENU_URL,callback:function(r){e.$set(e.formFieldsMenu,"MENU_URL",r)},expression:"formFieldsMenu.MENU_URL"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"排序","label-width":e.formLabelWidth,prop:"MENU_SOFT"}},[t("el-input-number",{attrs:{"auto-complete":"off"},model:{value:e.formFieldsMenu.MENU_SOFT,callback:function(r){e.$set(e.formFieldsMenu,"MENU_SOFT",r)},expression:"formFieldsMenu.MENU_SOFT"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"图标","label-width":e.formLabelWidth,prop:"MENU_ICON"}},[t("el-input",{attrs:{"auto-complete":"off"},model:{value:e.formFieldsMenu.MENU_ICON,callback:function(r){e.$set(e.formFieldsMenu,"MENU_ICON",r)},expression:"formFieldsMenu.MENU_ICON"}})],1)],1),e._v(" "),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(r){e.dialogFormVisibleMenu=!1}}},[e._v("取 消")]),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:function(r){e.addOrEditSubmitMenu("formFieldsMenu")}}},[e._v("确定")])],1)],1),e._v(" "),t("el-dialog",{attrs:{title:"添加操作信息",visible:e.dialogFormVisibleOper},on:{"update:visible":function(r){e.dialogFormVisibleOper=r}}},[t("el-form",{ref:"formFieldsOper",attrs:{model:e.formFieldsOper,rules:e.formRulesOper}},[t("el-form-item",{attrs:{label:"类型","label-width":e.formLabelWidth}},[t("el-radio-group",{model:{value:e.formFieldsOper.OPER_TYPE,callback:function(r){e.$set(e.formFieldsOper,"OPER_TYPE",r)},expression:"formFieldsOper.OPER_TYPE"}},[t("el-radio",{attrs:{label:0}},[e._v("功能")]),e._v(" "),t("el-radio",{attrs:{label:1}},[e._v("目录")])],1)],1),e._v(" "),t("el-form-item",{attrs:{label:"名称","label-width":e.formLabelWidth,prop:"OPER_NAME"}},[t("el-input",{attrs:{"auto-complete":"off"},model:{value:e.formFieldsOper.OPER_NAME,callback:function(r){e.$set(e.formFieldsOper,"OPER_NAME",r)},expression:"formFieldsOper.OPER_NAME"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"地址","label-width":e.formLabelWidth,prop:"OPER_URL"}},[t("el-input",{attrs:{"auto-complete":"off"},model:{value:e.formFieldsOper.OPER_URL,callback:function(r){e.$set(e.formFieldsOper,"OPER_URL",r)},expression:"formFieldsOper.OPER_URL"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"排序","label-width":e.formLabelWidth,prop:"OPER_SOFT"}},[t("el-input-number",{attrs:{"auto-complete":"off"},model:{value:e.formFieldsOper.OPER_SOFT,callback:function(r){e.$set(e.formFieldsOper,"OPER_SOFT",r)},expression:"formFieldsOper.OPER_SOFT"}})],1)],1),e._v(" "),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(r){e.dialogFormVisibleOper=!1}}},[e._v("取 消")]),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:function(r){e.addOrEditSubmitOper("formFieldsOper")}}},[e._v("确定")])],1)],1)],1)},staticRenderFns:[]};var p=t("VU/8")(c,m,!1,function(e){t("URyL")},null,null);r.default=p.exports}});
//# sourceMappingURL=6.ab169931b0caa576e8e0.js.map