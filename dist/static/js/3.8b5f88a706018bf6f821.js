webpackJsonp([3],{"8hXn":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("Xxa5"),s=n.n(i),r=n("exGp"),a=n.n(r),o=n("vLgD");function l(t,e){var n=function(t){try{return t.hasOwnProperty("id")?t.hasOwnProperty("pid")?t.hasOwnProperty("rootPid")||(t=[],console.log("conf mast be a json and has key rootPid")):(t=[],console.log("conf mast be a json and has key pid")):(t=[],console.log("conf mast be a json and has key id")),t}catch(t){return console.log("conf mast be a json and has key id,pid,rootPid"),[]}}(e);if(0===n.length)return[];var i=n.id,s=n.pid,r=n.rootPid,a=[];return t.forEach(function(e,n){if(e[s]===r){var o=c(e);!function t(e,n,i,s){s.forEach(function(t,s){if(t[n]===i[e]){var r=c(t);i.children.push(r)}});0!==i.children.length&&i.children.forEach(function(i,r){t(e,n,i,s)})}(i,s,o,t),a.push(o)}}),a}function c(t){return t.children=[],t}var u=n("lbHh"),h=n.n(u),p={name:"index",data:function(){return{userMenuData:null,isCollapse:!1,loginUser:{},getUserMessage:[{hint:"有变更，可在跟踪查看",time:"2018-06-18 08:16"},{hint:"有变更，可在跟踪查看",time:"2018-06-18 08:16"}]}},mounted:function(){this.getUserMenu(),this.loginUser=h.a.getJSON("user")},methods:{getUserMenu:function(){var t=this;return a()(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.get("/apis/sysmgr/menu/getUserMenu").then(function(e){t.userMenuData=l(e.menus,{id:"id",pid:"pid",rootPid:0}),t.userMenuData.unshift({id:1e5,name:"首页",pid:0,url:"/home",icon:"fa fa-home",children:[]})}).catch(function(t){});case 2:case"end":return e.stop()}},e,t)}))()},exitLogin:function(){var t=this;this.$confirm("确认退出登录?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.loginOut()}).catch(function(){})},loginOut:function(){var t=this;return a()(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.post("/apis/sysmgr/user/logout",{}).then(function(t){}).catch(function(t){});case 2:h.a.remove("user"),h.a.remove("token"),t.$router.push("/login");case 5:case"end":return e.stop()}},e,t)}))()},monitorMenu:function(){!1===this.isCollapse?this.isCollapse=!0:this.isCollapse=!1},gotoHome:function(){this.$router.push("/home")},gotoGithub:function(){window.location.href="https://github.com/ljphilp/vue-element-super"}}},d={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-container",{staticClass:"index"},[n("el-header",{staticStyle:{height:"50px"}},[n("div",{staticClass:"set-left"},[n("div",{staticStyle:{float:"left"}},[n("img",{staticStyle:{width:"30px",height:"30px"},attrs:{src:"/static/img/logo.png"}}),n("span",{staticStyle:{"margin-left":"10px",color:"#fff","font-size":"14px"}},[t._v("运维一体化平台")])]),t._v(" "),n("div",{staticClass:"monitor-menu",on:{click:t.monitorMenu}},[n("i",{staticClass:"fa fa-list"})])]),t._v(" "),n("div",{staticClass:"index-header-list set-right"},[n("ul",[n("li",[n("el-popover",{attrs:{"visible-arrow":!1,placement:"top-start",offset:"200",trigger:"hover"}},[n("div",{staticClass:"hint"},[t.getUserMessage.length>0?n("div",t._l(t.getUserMessage,function(e){return n("div",{staticClass:"hint-content"},[n("div",{staticStyle:{color:"#00C1DE","font-size":"10px"}},[t._v(t._s(e.hint))]),t._v(" "),n("div",{staticStyle:{"margin-bottom":"10px","font-size":"10px","margin-top":"2px"}},[t._v(t._s(e.time))])])}),0):n("div",{staticClass:"hint-content"},[n("div",{staticStyle:{color:"#00C1DE","font-size":"10px"}},[t._v("暂无消息")])])]),t._v(" "),n("div",{staticStyle:{"padding-right":"15px",height:"50px"},attrs:{slot:"reference"},slot:"reference"},[n("i",{staticClass:"atsFont",staticStyle:{"font-size":"26px","margin-top":"20px"}},[t._v("")]),t._v(" "),n("sup",{staticClass:"index-sup"},[t._v(t._s(t.getUserMessage.length))])])])],1),t._v(" "),n("li",[n("el-popover",{attrs:{"visible-arrow":!1,placement:"top-start","popper-class":"index-popper-class",trigger:"hover"}},[n("div",{staticClass:"hint"},[n("ul",{staticClass:"index-hint-content"},[n("li",{on:{click:t.gotoHome}},[t._v("\n                  首页\n                ")]),t._v(" "),n("li",{on:{click:t.gotoGithub}},[t._v("\n                  项目地址\n                ")]),t._v(" "),n("li",{on:{click:t.exitLogin}},[t._v("\n                  退出登录\n                ")])])]),t._v(" "),n("div",{attrs:{slot:"reference"},slot:"reference"},[n("img",{staticStyle:{width:"28px","border-radius":"50%",height:"28px","margin-right":"5px"},attrs:{src:"/static/img/user.jpg"}}),t._v(t._s(this.loginUser.user_name)+"\n            ")])])],1)])])]),t._v(" "),n("el-container",{staticClass:"el-container-center"},[n("el-scrollbar",{staticStyle:{"overflow-x":"hidden","background-color":"#1f2d3d",height:"100%"},attrs:{"wrap-class":"scrollbar-wrapper"}},[n("el-aside",{staticStyle:{width:"auto","overflow-x":"hidden"}},[n("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{router:"","text-color":"rgb(191, 203, 217)","active-text-color":"rgb(64, 158, 255)",collapse:t.isCollapse}},[t._l(t.userMenuData,function(e){return[0!==e.children.length?n("el-submenu",{key:e.id,attrs:{index:e.url}},[n("template",{slot:"title"},[n("i",{class:e.icon}),t._v(" "),n("span",{staticStyle:{"margin-left":"5px"}},[t._v(t._s(e.name))])]),t._v(" "),t._l(e.children,function(e){return n("el-menu-item",{key:e.id,staticStyle:{"padding-left":"25px"},attrs:{index:e.url}},[t._v("\n                　　"+t._s(e.name)+"\n              ")])})],2):n("el-menu-item",{key:e.id,attrs:{index:e.url}},[n("i",{class:e.icon}),t._v(" "),n("span",{staticStyle:{"margin-left":"5px"}},[t._v(t._s(e.name))])])]})],2)],1)],1),t._v(" "),n("el-main",[n("router-view")],1)],1)],1)},staticRenderFns:[]};var f=n("VU/8")(p,d,!1,function(t){n("ReDM")},null,null);e.default=f.exports},ReDM:function(t,e){}});
//# sourceMappingURL=3.8b5f88a706018bf6f821.js.map